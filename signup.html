<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="description" content="Sign up for MoonCart" />
        <title>Sign Up - MoonCart</title>

        <!-- Favicon -->
        <link rel="icon" type="image/svg+xml" href="assets/images/favicon.svg" />

        <!-- Google Fonts -->
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link
            href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap"
            rel="stylesheet"
        />

        <!-- Font Awesome -->
        <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
        />

        <!-- Stylesheets -->
        <link rel="stylesheet" href="css/main.css" />
        <link rel="stylesheet" href="css/responsive.css" />
        <style>
            /* Modern Signup Page Styles */
            body {
                background: #f8f9fa;
                overflow-x: hidden;
            }

            .signup-container {
                min-height: 100vh;
                display: flex;
                align-items: center;
                justify-content: center;
                padding: 40px 20px;
                position: relative;
                background-color: #f8f9fa;
                background-image: radial-gradient(
                        circle at 10% 20%,
                        rgba(227, 30, 36, 0.05) 0%,
                        transparent 30%
                    ),
                    radial-gradient(
                        circle at 90% 80%,
                        rgba(255, 107, 53, 0.05) 0%,
                        transparent 30%
                    );
            }

            .signup-container::before {
                content: "";
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23e31e24' fill-opacity='0.05'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
                opacity: 0.5;
            }

            .signup-card {
                max-width: 900px;
                width: 100%;
                position: relative;
                z-index: 10;
            }

            .signup-box {
                background: white;
                border-radius: 16px;
                box-shadow: 0 15px 50px rgba(0, 0, 0, 0.1);
                overflow: hidden;
                position: relative;
            }

            .signup-shapes {
                position: absolute;
                width: 100%;
                height: 100%;
                overflow: hidden;
                z-index: 0;
                pointer-events: none;
            }

            .shape-circle {
                position: absolute;
                border-radius: 50%;
            }

            .shape-circle-1 {
                width: 300px;
                height: 300px;
                background: linear-gradient(
                    135deg,
                    rgba(227, 30, 36, 0.05) 0%,
                    rgba(255, 107, 53, 0.05) 100%
                );
                top: -150px;
                right: -150px;
            }

            .shape-circle-2 {
                width: 200px;
                height: 200px;
                background: linear-gradient(
                    135deg,
                    rgba(255, 107, 53, 0.05) 0%,
                    rgba(227, 30, 36, 0.05) 100%
                );
                bottom: -100px;
                left: -80px;
            }

            .signup-header {
                text-align: center;
                padding: 30px 40px;
                position: relative;
                z-index: 2;
            }

            .signup-logo {
                margin-bottom: 15px;
            }

            .signup-logo img {
                height: 45px;
            }

            .signup-header h2 {
                font-size: 28px;
                font-weight: 700;
                color: var(--text-dark);
                margin-bottom: 10px;
            }

            .signup-header p {
                font-size: 15px;
                color: var(--text-light);
                margin-bottom: 0;
            }

            .signup-progress {
                display: flex;
                justify-content: space-between;
                max-width: 600px;
                margin: 30px auto 0;
                position: relative;
            }

            .signup-progress::before {
                content: "";
                position: absolute;
                top: 15px;
                left: 50px;
                right: 50px;
                height: 2px;
                background-color: var(--border-color);
                z-index: 1;
            }

            .progress-step {
                position: relative;
                z-index: 2;
                display: flex;
                flex-direction: column;
                align-items: center;
            }

            .step-number {
                width: 32px;
                height: 32px;
                border-radius: 50%;
                background: white;
                border: 2px solid var(--border-color);
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 14px;
                font-weight: 700;
                color: var(--text-light);
                position: relative;
                transition: all 0.3s ease;
            }

            .step-label {
                margin-top: 8px;
                font-size: 13px;
                color: var(--text-light);
                transition: all 0.3s ease;
            }

            .progress-step.active .step-number {
                background: linear-gradient(
                    135deg,
                    var(--primary-color) 0%,
                    var(--secondary-color) 100%
                );
                color: white;
                border-color: transparent;
                box-shadow: 0 5px 15px rgba(227, 30, 36, 0.25);
            }

            .progress-step.active .step-label {
                color: var(--primary-color);
                font-weight: 600;
            }

            .progress-step.completed .step-number {
                background: var(--success-color, #28a745);
                color: white;
                border-color: transparent;
            }

            .progress-step.completed .step-number::after {
                content: "âœ“";
                position: absolute;
                font-size: 14px;
            }

            .signup-body {
                padding: 0 40px 40px;
                position: relative;
                z-index: 2;
            }

            .form-section {
                display: none;
            }

            .form-section.active {
                display: block;
                animation: fadeIn 0.5s ease;
            }

            @keyframes fadeIn {
                from {
                    opacity: 0;
                    transform: translateY(10px);
                }
                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }

            .section-title {
                font-size: 18px;
                font-weight: 700;
                color: var(--text-dark);
                margin-bottom: 20px;
                display: flex;
                align-items: center;
                gap: 10px;
            }

            .section-title i {
                color: var(--primary-color);
                font-size: 20px;
            }

            .form-row {
                display: flex;
                flex-wrap: wrap;
                gap: 20px;
                margin-bottom: 15px;
            }

            .form-group {
                flex: 1;
                min-width: 250px;
                margin-bottom: 20px;
            }

            .form-label {
                display: block;
                margin-bottom: 8px;
                font-weight: 600;
                font-size: 14px;
                color: var(--text-dark);
            }

            .form-control {
                width: 100%;
                height: 50px;
                border: 1px solid var(--border-color);
                border-radius: 8px;
                padding: 0 15px;
                font-family: "Poppins", sans-serif;
                font-size: 15px;
                color: var(--text-dark);
                transition: all 0.3s ease;
                background: white;
            }

            .form-control:focus {
                border-color: var(--primary-color);
                box-shadow: 0 0 0 3px rgba(227, 30, 36, 0.1);
                outline: none;
            }

            .input-group {
                position: relative;
            }

            .input-group-icon {
                position: absolute;
                top: 50%;
                left: 15px;
                transform: translateY(-50%);
                color: var(--text-light);
                font-size: 16px;
            }

            .input-group .form-control {
                padding-left: 45px;
            }

            .password-toggle {
                position: absolute;
                top: 50%;
                right: 15px;
                transform: translateY(-50%);
                color: var(--text-light);
                font-size: 16px;
                cursor: pointer;
                background: none;
                border: none;
            }

            .address-section {
                background: #f9f9fa;
                padding: 20px;
                border-radius: 10px;
                margin: 0 0 30px;
                border: 1px dashed var(--border-color);
            }

            .password-strength {
                height: 5px;
                margin-top: 8px;
                border-radius: 3px;
                background: #eeeeee;
                overflow: hidden;
                transition: all 0.3s ease;
            }

            .password-strength-bar {
                height: 100%;
                width: 0;
                border-radius: 3px;
                transition: all 0.3s ease;
            }

            .password-strength-text {
                font-size: 12px;
                margin-top: 5px;
                transition: all 0.3s ease;
            }

            .strength-weak .password-strength-bar {
                width: 33%;
                background: #ff4d4d;
            }

            .strength-medium .password-strength-bar {
                width: 66%;
                background: #ffbd4d;
            }

            .strength-strong .password-strength-bar {
                width: 100%;
                background: #4dff88;
            }

            .strength-weak .password-strength-text {
                color: #ff4d4d;
            }

            .strength-medium .password-strength-text {
                color: #ffbd4d;
            }

            .strength-strong .password-strength-text {
                color: #4dff88;
            }

            .form-check {
                display: flex;
                align-items: center;
                margin-bottom: 24px;
            }

            .form-check-input {
                margin-right: 10px;
                width: 18px;
                height: 18px;
            }

            .form-check-label {
                font-size: 14px;
                color: var(--text-dark);
                margin-bottom: 0;
                user-select: none;
                cursor: pointer;
            }

            .form-check-label a {
                color: var(--primary-color);
                text-decoration: none;
                font-weight: 600;
            }

            .form-check-label a:hover {
                text-decoration: underline;
                color: var(--secondary-color);
            }

            .form-buttons {
                display: flex;
                justify-content: space-between;
                margin-top: 30px;
            }

            .btn-prev {
                padding: 14px 24px;
                background: transparent;
                border: 2px solid var(--border-color);
                border-radius: 8px;
                color: var(--text-dark);
                font-weight: 600;
                font-size: 16px;
                cursor: pointer;
                transition: all 0.3s ease;
                display: flex;
                align-items: center;
                gap: 8px;
            }

            .btn-prev:hover {
                border-color: var(--text-dark);
                background: rgba(0, 0, 0, 0.05);
            }

            .btn-next,
            .btn-submit {
                padding: 14px 28px;
                background: linear-gradient(
                    135deg,
                    var(--primary-color) 0%,
                    var(--secondary-color) 100%
                );
                border: none;
                border-radius: 8px;
                color: white;
                font-weight: 600;
                font-size: 16px;
                cursor: pointer;
                transition: all 0.3s ease;
                display: flex;
                align-items: center;
                gap: 8px;
                box-shadow: 0 5px 15px rgba(227, 30, 36, 0.25);
            }

            .btn-next:hover,
            .btn-submit:hover {
                transform: translateY(-3px);
                box-shadow: 0 8px 25px rgba(227, 30, 36, 0.3);
            }

            .btn-next:active,
            .btn-submit:active {
                transform: translateY(-1px);
            }

            .signup-footer {
                text-align: center;
                margin-top: 30px;
                font-size: 14px;
                color: var(--text-light);
            }

            .signup-footer a {
                color: var(--primary-color);
                font-weight: 600;
                text-decoration: none;
                transition: all 0.3s ease;
            }

            .signup-footer a:hover {
                color: var(--secondary-color);
                text-decoration: underline;
            }

            /* Select dropdown styling */
            select.form-control {
                appearance: none;
                -webkit-appearance: none;
                background-image: url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3E%3Cpath fill='none' stroke='%23343a40' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M2 5l6 6 6-6'/%3E%3C/svg%3E");
                background-repeat: no-repeat;
                background-position: right 0.75rem center;
                background-size: 16px 12px;
            }

            @media (max-width: 768px) {
                .form-row {
                    flex-direction: column;
                    gap: 0;
                }

                .signup-progress::before {
                    left: 25px;
                    right: 25px;
                }

                .step-number {
                    width: 28px;
                    height: 28px;
                    font-size: 12px;
                }

                .step-label {
                    font-size: 11px;
                }

                .form-buttons {
                    flex-direction: column-reverse;
                    gap: 10px;
                }

                .btn-prev,
                .btn-next,
                .btn-submit {
                    width: 100%;
                    justify-content: center;
                }
            }

            @media (max-width: 576px) {
                .signup-body,
                .signup-header {
                    padding-left: 20px;
                    padding-right: 20px;
                }

                .signup-progress {
                    max-width: 100%;
                }
            }
        </style>
    </head>
    <body>
        <div class="signup-container">
            <div class="signup-card">
                <div class="signup-box">
                    <div class="signup-shapes">
                        <div class="shape-circle shape-circle-1"></div>
                        <div class="shape-circle shape-circle-2"></div>
                    </div>
                    <div class="signup-header">
                        <div class="signup-logo">

                        </div>
                        <h2>Create Your Account</h2>
                        <p>Join MoonCart for the best shopping experience</p>

                        <div class="signup-progress">
                            <div class="progress-step active" data-step="1">
                                <div class="step-number">1</div>
                                <div class="step-label">Personal</div>
                            </div>
                            <div class="progress-step" data-step="2">
                                <div class="step-number">2</div>
                                <div class="step-label">Address</div>
                            </div>
                            <div class="progress-step" data-step="3">
                                <div class="step-number">3</div>
                                <div class="step-label">Account</div>
                            </div>
                        </div>
                    </div>

                    <div class="signup-body">
                        <form id="signup-form" onsubmit="handleSignup(event)">
                            <!-- Step 1: Personal Information -->
                            <div class="form-section active" id="step-1">
                                <h3 class="section-title">
                                    <i class="fas fa-user"></i>
                                    Personal Information
                                </h3>

                                <div class="form-row">
                                    <div class="form-group">
                                        <label class="form-label" for="fullname"
                                            >Full Name*</label
                                        >
                                        <div class="input-group">
                                            <i
                                                class="fas fa-user input-group-icon"
                                            ></i>
                                            <input
                                                type="text"
                                                id="fullname"
                                                class="form-control"
                                                placeholder="Enter your full name"
                                                required
                                            />
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label class="form-label" for="email"
                                            >Email Address*</label
                                        >
                                        <div class="input-group">
                                            <i
                                                class="fas fa-envelope input-group-icon"
                                            ></i>
                                            <input
                                                type="email"
                                                id="email"
                                                class="form-control"
                                                placeholder="Enter your email address"
                                                required
                                            />
                                        </div>
                                    </div>
                                </div>

                                <div class="form-row">
                                    <div class="form-group">
                                        <label class="form-label" for="phone"
                                            >Phone Number*</label
                                        >
                                        <div class="input-group">
                                            <i
                                                class="fas fa-phone input-group-icon"
                                            ></i>
                                            <input
                                                type="tel"
                                                id="phone"
                                                class="form-control"
                                                placeholder="Enter your phone number"
                                                required
                                            />
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label class="form-label" for="dob"
                                            >Date of Birth</label
                                        >
                                        <div class="input-group">
                                            <i
                                                class="fas fa-calendar input-group-icon"
                                            ></i>
                                            <input
                                                type="date"
                                                id="dob"
                                                class="form-control"
                                            />
                                        </div>
                                    </div>
                                </div>

                                <div class="form-buttons">
                                    <button
                                        type="button"
                                        class="btn-next"
                                        onclick="nextStep(1)"
                                    >
                                        Continue
                                        <i class="fas fa-arrow-right"></i>
                                    </button>
                                </div>
                            </div>

                            <!-- Step 2: Address Information -->
                            <div class="form-section" id="step-2">
                                <h3 class="section-title">
                                    <i class="fas fa-map-marker-alt"></i>
                                    Delivery Address
                                </h3>

                                <div class="address-section">
                                    <div class="form-group">
                                        <label class="form-label" for="address"
                                            >Full Address*</label
                                        >
                                        <div class="input-group">
                                            <i
                                                class="fas fa-home input-group-icon"
                                            ></i>
                                            <input
                                                type="text"
                                                id="address"
                                                class="form-control"
                                                placeholder="Enter your street address"
                                                required
                                            />
                                        </div>
                                    </div>

                                    <div class="form-row">
                                        <div class="form-group">
                                            <label
                                                class="form-label"
                                                for="block"
                                                >Block*</label
                                            >
                                            <select
                                                id="block"
                                                class="form-control"
                                                required
                                            >
                                                <option
                                                    value=""
                                                    selected
                                                    disabled
                                                >
                                                    Select a block
                                                </option>
                                                <option value="A">
                                                    Block A
                                                </option>
                                                <option value="B">
                                                    Block B
                                                </option>
                                                <option value="C">
                                                    Block C
                                                </option>
                                                <option value="D">
                                                    Block D
                                                </option>
                                                <option value="E">
                                                    Block E
                                                </option>
                                                <option value="F">
                                                    Block F
                                                </option>
                                                <option value="G">
                                                    Block G
                                                </option>
                                                <option value="H">
                                                    Block H
                                                </option>
                                                <option value="I">
                                                    Block I
                                                </option>
                                                <option value="J">
                                                    Block J
                                                </option>
                                                <option value="K">
                                                    Block K
                                                </option>
                                                <option value="L">
                                                    Block L
                                                </option>
                                                <option value="M">
                                                    Block M
                                                </option>
                                            </select>
                                        </div>

                                        <div class="form-group">
                                            <label class="form-label" for="road"
                                                >Road Number*</label
                                            >
                                            <div class="input-group">
                                                <i
                                                    class="fas fa-road input-group-icon"
                                                ></i>
                                                <input
                                                    type="text"
                                                    id="road"
                                                    class="form-control"
                                                    placeholder="Enter road number"
                                                    required
                                                />
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label
                                                class="form-label"
                                                for="house"
                                                >House Number*</label
                                            >
                                            <div class="input-group">
                                                <i
                                                    class="fas fa-house-user input-group-icon"
                                                ></i>
                                                <input
                                                    type="text"
                                                    id="house"
                                                    class="form-control"
                                                    placeholder="Enter house number"
                                                    required
                                                />
                                            </div>
                                        </div>
                                    </div>

                                    <div class="form-row">
                                        <div class="form-group">
                                            <label class="form-label" for="area"
                                                >Area/Neighborhood*</label
                                            >
                                            <div class="input-group">
                                                <i
                                                    class="fas fa-map-signs input-group-icon"
                                                ></i>
                                                <input
                                                    type="text"
                                                    id="area"
                                                    class="form-control"
                                                    placeholder="Enter area or neighborhood"
                                                    required
                                                />
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label class="form-label" for="city"
                                                >City*</label
                                            >
                                            <div class="input-group">
                                                <i
                                                    class="fas fa-city input-group-icon"
                                                ></i>
                                                <input
                                                    type="text"
                                                    id="city"
                                                    class="form-control"
                                                    placeholder="Enter city"
                                                    value="Dhaka"
                                                    required
                                                />
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label
                                                class="form-label"
                                                for="zipcode"
                                                >Postal Code*</label
                                            >
                                            <div class="input-group">
                                                <i
                                                    class="fas fa-mail-bulk input-group-icon"
                                                ></i>
                                                <input
                                                    type="text"
                                                    id="zipcode"
                                                    class="form-control"
                                                    placeholder="Enter postal code"
                                                    required
                                                />
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="form-buttons">
                                    <button
                                        type="button"
                                        class="btn-prev"
                                        onclick="prevStep(2)"
                                    >
                                        <i class="fas fa-arrow-left"></i>
                                        Previous
                                    </button>
                                    <button
                                        type="button"
                                        class="btn-next"
                                        onclick="nextStep(2)"
                                    >
                                        Continue
                                        <i class="fas fa-arrow-right"></i>
                                    </button>
                                </div>
                            </div>

                            <!-- Step 3: Account Information -->
                            <div class="form-section" id="step-3">
                                <h3 class="section-title">
                                    <i class="fas fa-lock"></i>
                                    Account Security
                                </h3>

                                <div class="form-group">
                                    <label class="form-label" for="password"
                                        >Create Password*</label
                                    >
                                    <div class="input-group">
                                        <i
                                            class="fas fa-lock input-group-icon"
                                        ></i>
                                        <input
                                            type="password"
                                            id="password"
                                            class="form-control"
                                            placeholder="Create a strong password"
                                            onkeyup="checkPasswordStrength()"
                                            required
                                        />
                                        <button
                                            type="button"
                                            class="password-toggle"
                                            onclick="togglePassword('password')"
                                        >
                                            <i class="fas fa-eye"></i>
                                        </button>
                                    </div>
                                    <div class="password-strength">
                                        <div
                                            class="password-strength-bar"
                                        ></div>
                                    </div>
                                    <div class="password-strength-text"></div>
                                </div>

                                <div class="form-group">
                                    <label
                                        class="form-label"
                                        for="confirm-password"
                                        >Confirm Password*</label
                                    >
                                    <div class="input-group">
                                        <i
                                            class="fas fa-lock input-group-icon"
                                        ></i>
                                        <input
                                            type="password"
                                            id="confirm-password"
                                            class="form-control"
                                            placeholder="Confirm your password"
                                            required
                                        />
                                        <button
                                            type="button"
                                            class="password-toggle"
                                            onclick="togglePassword('confirm-password')"
                                        >
                                            <i class="fas fa-eye"></i>
                                        </button>
                                    </div>
                                </div>

                                <div class="form-check">
                                    <input
                                        type="checkbox"
                                        class="form-check-input"
                                        id="terms"
                                        required
                                    />
                                    <label class="form-check-label" for="terms">
                                        I agree to the
                                        <a href="#">Terms & Conditions</a> and
                                        <a href="#">Privacy Policy</a>
                                    </label>
                                </div>

                                <div class="form-buttons">
                                    <button
                                        type="button"
                                        class="btn-prev"
                                        onclick="prevStep(3)"
                                    >
                                        <i class="fas fa-arrow-left"></i>
                                        Previous
                                    </button>
                                    <button type="submit" class="btn-submit">
                                        Create Account
                                        <i class="fas fa-check"></i>
                                    </button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
                <div class="signup-footer">
                    <p>
                        Already have an account? <a href="login.html">Log in</a>
                    </p>
                    <p><a href="index.html">Back to home</a></p>
                </div>
            </div>
        </div>

        <!-- Scripts -->
        <script src="js/main.js"></script>
        <script src="js/api.js"></script>
        <script>
            let currentStep = 1;

            function nextStep(step) {
                // Basic validation for current step
                const inputs = document.querySelectorAll(
                    `#step-${step} input[required], #step-${step} select[required]`
                );
                let isValid = true;

                inputs.forEach((input) => {
                    if (!input.value.trim()) {
                        input.style.borderColor = "#ff4d4d";
                        isValid = false;
                    } else {
                        input.style.borderColor = "";
                    }
                });

                if (!isValid) {
                    MoonCart.showNotification(
                        "Please fill all required fields.",
                        "error"
                    );
                    return;
                }

                // Validate email format on step 1
                if (step === 1) {
                    const email = document.getElementById("email").value;
                    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                    if (!emailRegex.test(email)) {
                        MoonCart.showNotification("Please enter a valid email address.", "error");
                        document.getElementById("email").style.borderColor = "#ff4d4d";
                        return;
                    }
                }

                // Hide current step
                document
                    .getElementById(`step-${step}`)
                    .classList.remove("active");
                // Update progress
                document
                    .querySelector(`.progress-step[data-step="${step}"]`)
                    .classList.add("completed");
                // Show next step
                document
                    .getElementById(`step-${step + 1}`)
                    .classList.add("active");
                document
                    .querySelector(`.progress-step[data-step="${step + 1}"]`)
                    .classList.add("active");

                currentStep = step + 1;
            }

            function prevStep(step) {
                // Hide current step
                document
                    .getElementById(`step-${step}`)
                    .classList.remove("active");
                document
                    .querySelector(`.progress-step[data-step="${step}"]`)
                    .classList.remove("active");
                // Show previous step
                document
                    .getElementById(`step-${step - 1}`)
                    .classList.add("active");

                currentStep = step - 1;
            }

            function togglePassword(id) {
                const input = document.getElementById(id);
                const icon = input.nextElementSibling.querySelector("i");

                if (input.type === "password") {
                    input.type = "text";
                    icon.classList.remove("fa-eye");
                    icon.classList.add("fa-eye-slash");
                } else {
                    input.type = "password";
                    icon.classList.remove("fa-eye-slash");
                    icon.classList.add("fa-eye");
                }
            }

            function checkPasswordStrength() {
                const password = document.getElementById("password").value;
                const strengthBar = document.querySelector(
                    ".password-strength-bar"
                );
                const strengthText = document.querySelector(
                    ".password-strength-text"
                );
                const strengthContainer =
                    document.querySelector(".password-strength");

                // Remove all classes
                strengthContainer.classList.remove(
                    "strength-weak",
                    "strength-medium",
                    "strength-strong"
                );

                if (!password) {
                    strengthText.textContent = "";
                    return;
                }

                // Check password strength
                let strength = 0;
                if (password.match(/[a-z]+/)) strength += 1;
                if (password.match(/[A-Z]+/)) strength += 1;
                if (password.match(/[0-9]+/)) strength += 1;
                if (password.match(/[!@#$%^&*()]+/)) strength += 1;
                if (password.length >= 8) strength += 1;

                // Update UI based on strength
                if (strength <= 2) {
                    strengthContainer.classList.add("strength-weak");
                    strengthText.textContent = "Weak Password";
                } else if (strength <= 4) {
                    strengthContainer.classList.add("strength-medium");
                    strengthText.textContent = "Medium Password";
                } else {
                    strengthContainer.classList.add("strength-strong");
                    strengthText.textContent = "Strong Password";
                }
            }

            async function handleSignup(event) {
                event.preventDefault();

                const password = document.getElementById("password").value;
                const confirmPassword = document.getElementById("confirm-password").value;

                if (password !== confirmPassword) {
                    MoonCart.showNotification("Passwords do not match!", "error");
                    return false;
                }

                if (password.length < 6) {
                    MoonCart.showNotification("Password must be at least 6 characters long.", "error");
                    return false;
                }

                if (!document.getElementById("terms").checked) {
                    MoonCart.showNotification("Please accept the terms and conditions", "error");
                    return false;
                }

                // Show loading
                MoonCart.showLoading();

                // Collect form data for backend API
                const userData = {
                    name: document.getElementById("fullname").value.trim(),
                    email: document.getElementById("email").value.trim(),
                    phone: document.getElementById("phone").value.trim(),
                    password: password,
                    role: "customer"
                };

                // Collect address data
                const addressData = {
                    label: "Home",
                    address_line: document.getElementById("address").value.trim(),
                    block: document.getElementById("block").value,
                    road: document.getElementById("road").value.trim(),
                    house: document.getElementById("house").value.trim(),
                    area: document.getElementById("area").value.trim(),
                    city: document.getElementById("city").value.trim(),
                    postal_code: document.getElementById("zipcode").value.trim(),
                    is_default: true
                };

                try {
                    // Call backend API to register user
                    const response = await MoonCartAPI.register(userData);
                    
                    if (response.success && response.user) {
                        const user = response.user;
                        
                        // Try to save address (optional - don't fail registration if address fails)
                        try {
                            addressData.user_id = user.id;
                            await MoonCartAPI.addAddress(addressData);
                        } catch (addressError) {
                            console.log("Address save skipped:", addressError.message);
                        }

                        MoonCart.hideLoading();
                        MoonCart.showNotification(
                            "Account created successfully! Redirecting to login...",
                            "success"
                        );

                        // Redirect to login page
                        setTimeout(() => {
                            window.location.href = "login.html";
                        }, 1500);
                    } else {
                        MoonCart.hideLoading();
                        MoonCart.showNotification(
                            response.message || "Registration failed. Please try again.",
                            "error"
                        );
                    }
                } catch (error) {
                    MoonCart.hideLoading();
                    console.error("Registration error:", error);
                    MoonCart.showNotification(
                        error.message || "Registration failed. Please try again.",
                        "error"
                    );
                }

                return false;
            }
        </script>
    </body>
</html>
